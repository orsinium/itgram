---
title: WebAssembly
date: 2020-02-04 19:58:22
tags: []
layout: post
telegram_id: 391
---

–í Go 1.11 –¥–æ–±–∞–≤–∏–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –≤ Web Assembly (wasm). –°–µ–π—á–∞—Å —É–∂–µ 1.13, –∏ —è —Ä–µ—à–∏–ª –∑–∞–∫–æ–ø–∞—Ç—å—Å—è –≤ —ç—Ç–æ –≤—Å—ë, –ø–æ–ø–∏—Å–∞—Ç—å –±—Ä–∞—É–∑–µ—Ä–Ω—ã–µ –∏–≥—Ä—ã –Ω–∞ Go —á–µ—Ä–µ–∑ canvas üôÉ –ï—Å–ª–∏ –∫—Ä–∞—Ç–∫–æ, —Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –≤–æ–æ–±—â–µ –æ—á–µ–Ω—å –∫—Ä—É—Ç–æ, –Ω–æ —Å —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã –ø–æ–∫–∞ —Ç–æ–ª–∫–æ–º –Ω–µ—Ç. –¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ –≤ –¥–µ—Ç–∞–ª—è—Ö. –ì–æ–≤–æ—Ä–∏—Ç—å —è –±—É–¥—É –ø—Ä–æ –∫–æ–º–ø–∏–ª—è—Ü–∏—é –∏–º–µ–Ω–Ω–æ wasm –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞ (`GOOS=js GOARCH=wasm`) –ø–æ—Ç–æ–º—É —á—Ç–æ –æ—á–µ–Ω—å —Ö–æ—á–µ—Ç—Å—è —Å—Ç–∞—Ç—å —Ñ—É–ª–ª—Å—Ç–µ–∫–æ-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º, –Ω–µ –≤—ã—Ö–æ–¥—è –∏–∑ —É—é—Ç–Ω–æ–≥–æ –º–∏—Ä–∞ Go.

–î–ª—è –Ω–∞—á–∞–ª–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç–∞—Ç–µ–π:

+ [WebAssembly](https://github.com/golang/go/wiki/WebAssembly) ‚Äî –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –≥–∞–π–¥, –ø–æ–∫—Ä—ã–≤–∞—é—â–∏–π –≤—Å–µ –æ—Å–Ω–æ–≤—ã, –∫–∞–∫–∏–µ-—Ç–æ —Ç–æ–Ω–∫–∏–µ –º–æ–º–µ–Ω—Ç—ã –∏ –∏–º–µ—é—â–∏–π —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ä–∞–∑–Ω—ã–µ —Å—Ç–∞—Ç—å–∏ –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏.

+ [The world‚Äôs easiest introduction to WebAssembly](https://www.freecodecamp.org/news/webassembly-with-golang-is-fun-b243c0e34f02/) ‚Äî –ª—É—á—à–∞—è —Å—Ç–∞—Ç—å—è, –∫–æ—Ç–æ—Ä—É—é —è –Ω–∞—à—ë–ª. –ü–æ –∫—Ä–∞–π–Ω–µ–π –º–µ—Ä–µ, –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Å [—Ä–∞–±–æ—Ç–∞—é—â–∏–º–∏ –∏—Å—Ö–æ–¥–Ω–∏–∫–∞–º–∏](https://github.com/olso/go-wasm-cat-game-on-canvas-with-docker)

–û—Ç –ø—Ä–æ—Å—Ç–æ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –≤ wasm –±–∏–Ω–∞—Ä–Ω–∏–∫–∞ —Ç–æ–ª–∫—É –º–∞–ª–æ. –ù–µ–ª—å–∑—è –¥–µ–ª–∞—Ç—å –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤, –≤–∫–ª—é—á–∞—è —á—Ç–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (–±—Ä–∞—É–∑–µ—Ä –Ω–µ —Ä–∞–∑—Ä–µ—à–∏—Ç). –ó–∞—Ç–æ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å —Å–µ—Ç–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã, –∞ –µ—â—ë –≤—Å—ë, —á—Ç–æ –æ–±—ã—á–Ω–æ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ stdout/stderr, –±—É–¥–µ—Ç –ø–µ—Ä–µ–∫–∏–Ω—É—Ç–æ –≤ –∫–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞. –ù—É –∏ –≤–æ—Ç —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –±—Ä–∞—É–∑–µ—Ä–æ–º, –µ—Å—Ç—å [syscall/js](https://godoc.org/syscall/js). –≠—Ç–∞ –≤–æ–ª—à–µ–±–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å JS –Ω–∞ –ø–æ–ª–Ω—É—é –∫–∞—Ç—É—à–∫—É: –ø–æ–ª—É—á–∞—Ç—å –ª—é–±—ã–µ –æ–±—ä–µ–∫—Ç—ã –∏ –∞—Ç—Ç—Ä–∏–±—É—Ç—ã, —á–∏—Ç–∞—Ç—å –∏—Ö –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ç–∏–ø—ã Go, –≤—ã–∑—ã–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –º–µ—Ç–æ–¥—ã, –∏ –¥–∞–∂–µ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ Go —Ñ—É–Ω–∫—Ü–∏–∏, —á—Ç–æ–±—ã –∏—Ö –º–æ–∂–Ω–æ –±—ã–ª–æ –≤—ã–∑—ã–≤–∞—Ç—å –∏–∑ JS. –ù—É –≤–æ—Ç –ø—Ä–∞–≤–¥–∞, –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏. –í–æ—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ —ç—Ç–∞ —à—Ç—É–∫–∞ –Ω–∏—á–µ–≥–æ –Ω–µ –∑–Ω–∞–µ—Ç –æ –≤—Å—è–∫–∏—Ö WebAPI.  –í–æ—Ç –ø—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:

```var cb js.Func
cb = js.FuncOf(func(this js.Value, args []js.Value) interface{} {
    fmt.Println("button clicked")
    cb.Release() // release the function if the button will not be clicked again
    return nil
})
js.Global().Get("document").Call("getElementById", "myButton").Call("addEventListener", "click", cb)```

–í –æ–±—â–µ–º, –¥–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –Ω–µ—Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∏—Ä. –ü—Ä–∏—á—ë–º —ç—Ç–æ —Ö—É–∂–µ, —á–µ–º –ø–∏—Å–∞—Ç—å –Ω–∞ —á–∏—Å—Ç–æ–º JS, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ —É –Ω–∞—Å –≤–æ–æ–±—â–µ –Ω–µ—Ç –Ω–∏–∫–∞–∫–æ–≥–æ –∞–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç–∞, –¥–µ–±–∞–≥–≥–∏–Ω–≥–∞ (–¥–µ–±–∞–≥–≥–µ—Ä –¥–ª—è wasm –µ—â—ë –Ω–µ —Å–¥–µ–ª–∞–ª–∏, –¥—Ä—É–∂–Ω–æ –¥–µ–±–∞–∂–∏–º –ø—Ä–∏–Ω—Ç–∞–º–∏), –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏. –í–æ–æ–±—â–µ –Ω–∏—á–µ–≥–æ, —Ç–æ–ª—å–∫–æ –Ω–∞—à–µ –±–µ–∑—Ä–∞—Å—Å—É–¥—Å—Ç–≤–æ –∏ –æ—Ç–≤–∞–≥–∞. –ü–æ—ç—Ç–æ–º—É –≤–æ–∫—Ä—É–≥ —ç—Ç–æ–≥–æ –ø—Ä—è–º –æ—á–µ–Ω—å –Ω—É–∂–Ω—ã –æ–±—ë—Ä—Ç–∫–∏ –Ω–∞ Go, –∫–æ—Ç–æ—Ä—ã–µ –≤—Å—ë —Å–¥–µ–ª–∞—é—Ç —è–≤–Ω—ã–º –∏ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º. –í–æ—Ç –æ–± —ç—Ç–æ–º –∏ –ø–æ–≥–æ–≤–æ—Ä–∏–º.

+ [app](https://github.com/maxence-charriere/app) ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –∞–≤—Ç–æ—Ä —Ö–æ—á–µ—Ç –Ω–∞–ø–∏—Å–∞—Ç—å –Ω–æ–≤—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É, –∞ —ç—Ç—É –≤—ã–∫–∏–Ω—É—Ç—å ([–ø—Ä—É—Ñ](https://github.com/maxence-charriere/app/issues/312#issuecomment-580255190)). –ö —Ç–æ–º—É –∂–µ, –æ–Ω–∞ –Ω–∞–≤—è–∑—ã–≤–∞–µ—Ç —Å–≤–æ–π —Å–µ—Ä–≤–µ—Ä, —Å–≤–æ–π –ª–æ–≥–≥–∏–Ω–≥ –∏ –ø—Ä–æ—á–µ–µ, —á—Ç–æ –¥–µ–ª–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å –Ω–µ–π —Å–ª–æ–∂–Ω–æ–π.

+ [vert](https://github.com/norunners/vert) ‚Äî –æ–±–µ—Ä—Ç–∫–∞ –¥–ª—è –±–æ–ª–µ–µ —É–¥–æ–±–Ω–æ–π –∫–æ–≤–µ—Ä—Ç–∞—Ü–∏–∏ Go struct –≤ JS object –∏ –æ–±—Ä–∞—Ç–Ω–æ. –ù–µ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è, –Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç.

+ [go-canvas](https://github.com/markfarnan/go-canvas) ‚Äî –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∏—Å–æ–≤–∞–Ω–∏—è –Ω–∞ canvas —á–µ—Ä–µ–∑ [draw2d](https://github.com/llgcode/draw2d). –ù–µ –ø—Ä–æ–±–æ–≤–∞–ª, –Ω–æ –ø–ª–∞–Ω–∏—Ä—É—é, –≤—ã–≥–ª—è–¥–∏—Ç –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ.

+ [webapi](https://github.com/gowebapi/webapi) ‚Äî –ø–æ–ø—ã—Ç–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ–±–µ—Ä—Ç–∫—É –Ω–∞–¥ WebAPI. –ü—Ä–æ–µ–∫—Ç –≤—ã–≥–ª—è–¥–∏—Ç –∑–∞–±—Ä–æ—à–µ–Ω–Ω—ã–º, –ø—Ä–∏—á—ë–º –Ω–∞ —Ä–∞–Ω–Ω–∏—Ö —ç—Ç–∞–ø–∞—Ö. –ú–Ω–æ–≥–∏—Ö –≤–µ—â–µ–π –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç, –∏ –ø–æ—ç—Ç–æ–º—É —Ä–∞–±–æ—Ç–∞—Ç—å —Å —ç—Ç–æ–π —à—Ç—É–∫–æ–π –ø—Ä–æ—Å—Ç–æ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è. –ö —Ç–æ–º—É –∂–µ, –¥–∞–∂–µ —Ç–∞–º, –≥–¥–µ –Ω—É–∂–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –µ—Å—Ç—å, –∑–∞—á–∞—Å—Ç—É—é —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–∏–º–∏ –±–æ–ª—å–Ω–æ. –í–æ—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∫ –Ω–æ–≤—ã–π canvas —Å–æ–∑–¥–∞—Ç—å (üò®):

`canvas.HTMLCanvasElementFromJS(webapi.GetWindow().Document().CreateElement("canvas", &webapi.Union{js.ValueOf("dom.Node")}))`

–í—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ, —á—Ç–æ —è –ø–æ–ø—Ä–æ–±–æ–≤–∞–ª (vue, dom) –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –Ω–µ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è.

–í –æ–±—â–µ–º, –µ—Å–ª–∏ –µ—Å—Ç—å –Ω–µ–ø—Ä–µ–æ–¥–æ–ª–∏–º–æ–µ –∂–µ–ª–∞–Ω–∏–µ –Ω–∞–ø–∏—Å–∞—Ç—å React –Ω–∞ Go ‚Äî –≤–ø–µ—Ä—ë–¥, –º–∏—Ä—É –Ω—É–∂–µ–Ω –≥–µ—Ä–æ–π. –ï—Å–ª–∏ —Ö–æ—á–µ—Ç—Å—è –Ω–∞–ø–∏—Å–∞—Ç—å –æ–±—ë—Ä—Ç–∫—É –Ω–∞–¥ WebAPI ‚Äî –µ—â—ë –ª—É—á—à–µ! –ú–æ–∂–µ—Ç–µ –º–Ω–µ –Ω–∞–ø–∏—Å–∞—Ç—å, —è 2 –¥–Ω—è —ç—Ç–∏–º –∑–∞–Ω–∏–º–∞–ª—Å—è, –¥–æ–≤–æ–ª—å–Ω–æ –º–Ω–æ–≥–æ–µ —Å–¥–µ–ª–∞–ª, –Ω–æ –Ω–µ —É–≤–µ—Ä–µ–Ω, —á—Ç–æ —Ö–≤–∞—Ç–∏—Ç —ç–Ω–µ—Ä–≥–∏–∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å. –í–æ—Ç –µ—Å–ª–∏ –∫—Ç–æ-—Ç–æ –µ—â—ë —Ö–æ—á–µ—Ç —ç—Ç–∏–º –∑–∞–Ω—è—Ç—å—Å—è ‚Äî –¥—Ä—É–≥–æ–µ –¥–µ–ª–æ, –≤–º–µ—Å—Ç–µ –≤–µ—Å–µ–ª–µ–µ.
